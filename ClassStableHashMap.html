<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="ClassStableHashMap.html">ClassStableHashMap</a></li></li><li><li><a href="FunctionalStableHashMap.html">FunctionalStableHashMap</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.HashTableProps">HashTableProps</a></li></li><li><li><a href="#type.StableHashMap">StableHashMap</a></li></li><li><li><a href="#clone">clone</a></li></li><li><li><a href="#fromIter">fromIter</a></li></li><li><li><a href="#map">map</a></li></li><li><li><a href="#mapFilter">mapFilter</a></li></li></ul></nav><div class="documentation"><h1>ClassStableHashMap</h1><p>The below is the reference HashMap.mo file from 
https://github.com/dfinity/motoko-base/blob/master/src/HashMap.mo
that was used to create StableHashMap.mo</p>
<p>Mutable stable hash map (aka Hashtable)</p>
<p>This module defines an imperative hash map (hash table), with a general key and value type.
exportProps() and importProps() functions were added to the original implementation in order to allow 
the hashtable and it's item count to be retrievable and therefore persistable across upgrades.</p>
<p>It has a minimal object-oriented interface: <code>get</code>, <code>set</code>, <code>delete</code>, <code>count</code> and <code>entries</code>.</p>
<p>The class is parameterized by the key's equality and hash functions,
and an initial capacity.  However, as with the <code>Buffer</code> class, no array allocation
happens until the first <code>set</code>.</p>
<p>Internally, table growth policy is very simple, for now:
 Double the current capacity when the expected bucket list size grows beyond a certain constant.</p>
<div class="declaration"><h4 class="type-declaration" id="type.HashTableProps"><span class="keyword">type </span><span class="type">HashTableProps</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt; = { table : <a href="#type.HashTable"><span class="type">HashTable</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;; _count : <span class="type">Nat</span> }</h4><p></p></div><div class="declaration"><h4 class="class-declaration" id="type.StableHashMap"><span class="keyword">class </span><span class="classname">StableHashMap</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">initCapacity</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <span class="type">Hash.Hash</span><br/>)</h4><div class="declaration"><h4 class="function" id="StableHashMap.importProps"><code><span class="keyword">public func </span><span class="fnname">importProps</span>(<span class="parameter">props</span> : <a href="#type.HashTableProps"><span class="type">HashTableProps</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;) : ()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="StableHashMap.exportProps"><code><span class="keyword">public func </span><span class="fnname">exportProps</span>() : <a href="#type.HashTableProps"><span class="type">HashTableProps</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="StableHashMap.size"><code><span class="keyword">public func </span><span class="fnname">size</span>() : <span class="type">Nat</span></code></h4><p><p>Returns the number of entries in this StableHashMap.</p>
</p></div><div class="declaration"><h4 class="function" id="StableHashMap.delete"><code><span class="keyword">public func </span><span class="fnname">delete</span>(<span class="parameter">k</span> : <span class="type">K</span>)</code></h4><p><p>Deletes the entry with the key <code>k</code>. Doesn't do anything if the key doesn't
exist.</p>
</p></div><div class="declaration"><h4 class="function" id="StableHashMap.remove"><code><span class="keyword">public func </span><span class="fnname">remove</span>(<span class="parameter">k</span> : <span class="type">K</span>) : ?<span class="type">V</span></code></h4><p><p>Removes the entry with the key <code>k</code> and returns the associated value if it
existed or <code>null</code> otherwise.</p>
</p></div><div class="declaration"><h4 class="function" id="StableHashMap.get"><code><span class="keyword">public func </span><span class="fnname">get</span>(<span class="parameter">k</span> : <span class="type">K</span>) : ?<span class="type">V</span></code></h4><p><p>Gets the entry with the key <code>k</code> and returns its associated value if it
existed or <code>null</code> otherwise.</p>
</p></div><div class="declaration"><h4 class="function" id="StableHashMap.put"><code><span class="keyword">public func </span><span class="fnname">put</span>(<span class="parameter">k</span> : <span class="type">K</span>, <span class="parameter">v</span> : <span class="type">V</span>)</code></h4><p><p>Insert the value <code>v</code> at key <code>k</code>. Overwrites an existing entry with key <code>k</code></p>
</p></div><div class="declaration"><h4 class="function" id="StableHashMap.replace"><code><span class="keyword">public func </span><span class="fnname">replace</span>(<span class="parameter">k</span> : <span class="type">K</span>, <span class="parameter">v</span> : <span class="type">V</span>) : ?<span class="type">V</span></code></h4><p><p>Insert the value <code>v</code> at key <code>k</code> and returns the previous value stored at
<code>k</code> or <code>null</code> if it didn't exist.</p>
</p></div><div class="declaration"><h4 class="function" id="StableHashMap.keys"><code><span class="keyword">public func </span><span class="fnname">keys</span>() : <span class="type">Iter.Iter</span>&lt;<span class="type">K</span>&gt;</code></h4><p><p>An <code>Iter</code> over the keys.</p>
</p></div><div class="declaration"><h4 class="function" id="StableHashMap.vals"><code><span class="keyword">public func </span><span class="fnname">vals</span>() : <span class="type">Iter.Iter</span>&lt;<span class="type">V</span>&gt;</code></h4><p><p>An <code>Iter</code> over the values.</p>
</p></div><div class="declaration"><h4 class="function" id="StableHashMap.entries"><code><span class="keyword">public func </span><span class="fnname">entries</span>() : <span class="type">Iter.Iter</span>&lt;(<span class="type">K</span>, <span class="type">V</span>)&gt;</code></h4><p><p>Returns an iterator over the key value pairs in this
<code>StableHashMap</code>. Does <em>not</em> modify the <code>StableHashMap</code>.</p>
</p></div><p><p>An imperative StableHashMap with a minimal object-oriented interface.
Maps keys of type <code>K</code> to values of type <code>V</code>.</p>
</p></div><div class="declaration"><h4 class="function" id="clone"><code><span class="keyword">public func </span><span class="fnname">clone</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">h</span> : <a href="#type.StableHashMap"><span class="type">StableHashMap</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <span class="type">Hash.Hash</span><br/>) : <a href="#type.StableHashMap"><span class="type">StableHashMap</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p><p>clone cannot be an efficient object method,
...but is still useful in tests, and beyond.</p>
</p></div><div class="declaration"><h4 class="function" id="fromIter"><code><span class="keyword">public func </span><span class="fnname">fromIter</span>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;(<br/>  <span class="parameter">iter</span> : <span class="type">Iter.Iter</span>&lt;(<span class="type">K</span>, <span class="type">V</span>)&gt;, <br/>  <span class="parameter">initCapacity</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <span class="type">Hash.Hash</span><br/>) : <a href="#type.StableHashMap"><span class="type">StableHashMap</span></a>&lt;<span class="type">K</span>, <span class="type">V</span>&gt;</code></h4><p><p>Clone from any iterator of key-value pairs</p>
</p></div><div class="declaration"><h4 class="function" id="map"><code><span class="keyword">public func </span><span class="fnname">map</span>&lt;<span class="type">K</span>, <span class="type">V1</span>, <span class="type">V2</span>&gt;(<br/>  <span class="parameter">h</span> : <a href="#type.StableHashMap"><span class="type">StableHashMap</span></a>&lt;<span class="type">K</span>, <span class="type">V1</span>&gt;, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <span class="type">Hash.Hash</span>, <br/>  <span class="parameter">mapFn</span> : (<span class="type">K</span>, <span class="type">V1</span>) -&gt; <span class="type">V2</span><br/>) : <a href="#type.StableHashMap"><span class="type">StableHashMap</span></a>&lt;<span class="type">K</span>, <span class="type">V2</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="mapFilter"><code><span class="keyword">public func </span><span class="fnname">mapFilter</span>&lt;<span class="type">K</span>, <span class="type">V1</span>, <span class="type">V2</span>&gt;(<br/>  <span class="parameter">h</span> : <a href="#type.StableHashMap"><span class="type">StableHashMap</span></a>&lt;<span class="type">K</span>, <span class="type">V1</span>&gt;, <br/>  <span class="parameter">keyEq</span> : (<span class="type">K</span>, <span class="type">K</span>) -&gt; <span class="type">Bool</span>, <br/>  <span class="parameter">keyHash</span> : <span class="type">K</span> -&gt; <span class="type">Hash.Hash</span>, <br/>  <span class="parameter">mapFn</span> : (<span class="type">K</span>, <span class="type">V1</span>) -&gt; ?<span class="type">V2</span><br/>) : <a href="#type.StableHashMap"><span class="type">StableHashMap</span></a>&lt;<span class="type">K</span>, <span class="type">V2</span>&gt;</code></h4><p></p></div></div></body></html>